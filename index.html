<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>SenseFucker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="style.css" />
    <script src="https://code.jquery.com/jquery-3.3.1.slim.js" integrity="sha256-fNXJFIlca05BIO2Y5zh1xrShK3ME+/lYZ0j+ChxX2DA="
        crossorigin="anonymous"></script>

<style>
    
body {
    background-color: black;
}

H4,p { 
    color: #2f5687; 
    font-family: Verdana, Geneva, Tahoma, sans-serif;
}

#humanInput {
    background-color: black;
    color: #2f5687; 
    font-family: Verdana, Geneva, Tahoma, sans-serif;
    width: 100%;
}

body {
    height: 100%;
}

#mailReply {
    background-color: #2f5687;
    color: white; 
}
</style>

</head>

<body>
    <button id="mailReply">Smart mail replier </button>
    <div>
        <h4>Ask me anything :</h4>
    </div>
    <input type="text" id="humanInput">
    <div id="chat"></div>
</body>
<script>

    $(function () {

        var options = {
            mode: "smartReply",
            defaultMode: "chatBot",
            language: "ENG"
        }

        $("#mailReply").on("click", () => {
            let btn = $("#mailReply");
            if (options.mode != "smartReply") {
                options.mode = "smartReply";
                btn.css("background-color", "#2f5687");
                btn.css("color", "white");
            } else {
                btn.css("background-color", "black");
                btn.css("color", "#2f5687");
                options.mode = options.defaultMode;
            }
        })


        
        $("#humanInput").keypress((e) => {
         
            if (e.which == 13) {
                console.log(options.mode);
                var chat = $("#chat")
                var input = $("#humanInput");
                var string = input.val();
                if (options.mode == "chatBot") {
                    chat.after("<p>" + input.val() + "</p>");
                    input.val("");

                    window.setTimeout(() => {  
                        let chat = $("#chat");
                        console.log(string);
                        chat.after("<p>" + chatBot(string) + "</p>");
                    }, 750);
                    input.focus();
                }
                else if (options.mode == "smartReply") {
                    chat.after("<p>" + smartReply(string) + "</p>");
                }

            }
        });


        function smartReply (string) {
            var lexicon = [];
            let words = string.split(" ");
            words.forEach(element => {
                if(element.length > 4) {
                    lexicon.push(element);
                }
            });
        
            return " thanks for your mail about " + randomIndex(lexicon) + ", this helps me a lot for my work on " + randomIndex(lexicon) + ". I\'m not sure about " + randomIndex(lexicon) + " though. It may be related to " + randomIndex(lexicon) + "."; 

        }

        function randomIndex(array) {
            return array[Math.floor(Math.random() * array.length)];
        }



        function chatBot(string) {
            let words = string.split(" ");
            console.log(words[0].toLowerCase());
            if (words[0].toLowerCase() == "what") {
                return "What the fuck is " + words[2] + "?";
            } else if (words[0].toLowerCase() == "it" && words[1].toLowerCase() == "is") {
                return "The fuck do I care ?"
            }
            else {
                return "NO.";
            }
        }
    })
</script>
</html>